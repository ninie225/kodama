{% extends 'base.html.twig' %}

{% block title %}Carte{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('styles/carte.css') }}">
{% endblock %}

{% block body %}
<div class="carte d-flex flex-column">
        {% include 'navbar.html.twig' %}

        <div class="d-flex flex-column justify-content-start align-items-center text-center text-white px-3">
                <h1 class="display-4 text-uppercase fw-bold">Nos plats</h1>
                <p class="h5 my-3">Découvrez les plats disponibles dans tous les restaurants Ghibli</p>

                 {# Boutons de catégories #}
                <div class="d-flex justify-content-center my-5">
                        <button class="btn btn-category mx-2 active rounded-5 fw-bold px-4" data-category="entree">Entrées</button>
                        <button class="btn btn-category mx-2 rounded-5 fw-bold px-4" data-category="plat">Plats</button>
                        <button class="btn btn-category mx-2 rounded-5 fw-bold px-4" data-category="dessert">Desserts</button>
                        <button class="btn btn-category mx-2 rounded-5 fw-bold px-4" data-category="boisson">Boissons</button>
                </div>

                {# Conteneur pour les cartes de plats #}
                <div class="container">
                        <div class="row" id="plats-container">
                            {% for plat in plats %}
                            <div class="col-md-3 mb-4">
                                <a href="{{ path('app_details', {'id': plat.id}) }}" class="text-decoration-none text-reset d-block h-100">
                                    <div class="card rounded-3 h-100 plat-card" data-category="{{ plat.categorie }}">
                                        <img src="{{ asset(plat.photo) }}" class="card-img-top rounded-3 p-1" alt="{{ plat.nom }}">
                                        <div class="card-body">
                                            <h5 class="card-title fw-bold">{{ plat.nom }}</h5>
                                            <p class="card-text fw-bold text-white">{{ plat.prix }} €</p>
                                        </div>
                                    </div>
                                </a>
                            </div>
                            {% endfor %}
                        </div>
                </div>
        </div>
</div>

<script>
document.addEventListener('turbo:load', function() {
    const buttons = document.querySelectorAll('.btn-category');
    const platContainers = document.querySelectorAll('#plats-container > .col-md-3'); 

    function filterPlats(category) {
        platContainers.forEach(container => {
            const card = container.querySelector('.plat-card');
            if (card.dataset.category === category) {
                container.style.display = 'block'; 
            } else {
                container.style.display = 'none';  
            }
        });
    }

    // Au chargement, afficher uniquement les entrées
    filterPlats('entree');

    // Gestion des boutons
    buttons.forEach(button => {
        button.addEventListener('click', function() {
            buttons.forEach(btn => btn.classList.remove('active'));
            this.classList.add('active');
            const category = this.dataset.category;
            filterPlats(category);
        });
    });
});
</script>

{% endblock %}



